R&D SW그룹(디지털PLM)-B
DS Jira/Confluence 24시간 장애 모니터링 체계 및 긴급대응 체계 적용

DJ Jira/Confluence는 장애 발생 시 30분 이내 복구를 목표로 하는 A급 시스템으로, 장애 예방 및 신속한 대응이 필요함

DS Jira/Confluence 사용현황 (2025.07월 ~ 09월)
|인스턴스|사용자(3개월) Jira|사용자(3개월) Confluence|Jira 프로젝트수 전체(아카이브포함)|Jira 프로젝트수 Current|Confluence 공간수 전체(아카이브포함)|Confluence 공간수 Current|
|---|---|---|---|---|---|---|
|DS|28509|83010|7473|4819|8594|6686|
|B2B|1534|836|126|113|83|83|
|CAE|48|42|20|20|15|15|
|DV팀 MLM|3615|4265|1103|904|261|261|

- 야간, 휴일 장애를 늦게 인지한 경우 목표시간내 복구하지 못할 수 있음
- SDS 담당자 및 운영자는 S-RBS Lite로 서버 접근가능하나, 서비스의 웹접속 등은 불가하여 장애 대응에 불편사항이 있음
- 24시간 장애 모니터링체계를 적용하고, SROC를 통한 24시간 긴급대응체계를 구축해 신속한 장애대응 가능
* SROC: Service Reliable Operation Center, 삼성전자 DS의 24시간 장애대응 조직

장애 대응 프로세스 정비
- 장애대응 프로세스
상황전파, SDS담당자, 전자담당자, SROC에 걸쳐 
동보, 동보알람감지/장애감지선언/서비스접속확인/장애주관자선언/원인파악/장애선언/장애복구SOP/서비스정상화/서비스점검,모니터링 등의 절차가 상세히 정의됨

24시간 장애 모니터링 체계 적용
- 서비스 등급별 표준 센서 정의
  . 서비스 등급/용도별 모니터링 대상 표준 센서 정비
- 표준 센서별 모니터링 적용 및 이상상황 발생시 동보 체계 구축
  . 서버 리소스 모니터링: CPU, 메모리, 디스크 사용량 등 다양한 리소스 지표 실시간 모니터링, 이상 상황 발생시 동보 발송
  . 애플리케이션의 성능 모니터링: 트랜잭션 시간, 오류빈도, 화면 로딩시간 등 데이터 수집, 이상 상황 발생시 동보 발송
  
장애 긴급대응 체계 적용
- 24시간 신속한 장애대응 체계 구축
  . 동보 발생시 SROC와 SDS, 전자 담당자가 있는 Knox 메신저 방에서 장애대응 시작
  . 업무시간에는 SDS 담당자가 우선 대응하며, 평일 18시 ~ 익일 8시 사이 또는 주말 및 공휴일은 SROC에서 비상연락망을 가동하고 대응
  . 인스턴스별 장애대응 SOP 표준화
  
SOP 표준화 샘플 (MLM Jira AP)
1. 동보 수신
--
P-DEP을 기준으로 센서 정보를 작성한다.
1-1. 동보 채널: 메일/메신저/SMS
1-2. 동보 발생 기준: 2분 간격으로 5초 이내 미응답 3회 발생시 알람 발생
1-3. 알람 센서: Product ID: mlm-jira-ap (update. 2025-10-14)
<WEB Health Check> link 포함
<TCP Health Check> link 포함
1-4. 동보 예시:
메신저, 메일: 제목: [0보][A등급][SW서비스(Jira Conflu.)/5-5 메모리 MLM/mlm-jira-ap01-prod]
             내용 : - 센서: MLM Jira ap01
                   - 일시: 25/10/13(Mon) 00:36
                   - 현상: WEB Health Check 3회 연속 실패하였습니다.
* 발생시각확인: 평일 18:00 ~ 익일 09:00 사이 또는 주말 및 공휴일에 발생시, 서비스 담당자 inform 및 가이드 받아 진행. (취약 시간대여도 담당자가 직접 대응 가능할 경우, 담당자가 대응)
* 동보 동시 발생시 우선순위 - DB > Proxy > Crowd > Jira 순 대응

2. 이슈 확인
--
2-1. 비상 연락망 가동
SROC: MLM Jira Health Check 실패로 비상 대응 가동합니다. 장애상황 홍길동 담당자에게 전달완료.

3. 장애 조치
--
3-1. 장비 정보
|hostname|용도|
|---|---|
| |Jira LB|
|khmlmjiraw01|Jira AP 01|
|khmlmjirad01|Jira DB 01|
3-2. 장애 조치
노드 동보 동시 발생시 반드시 모든 서비스 정상화 확인 후 다음 노드를 순차 복구 진행하며 동시 OFF되지 않도록 한다.
단계별로 진행상황을 공유한다. SOP대로 진행되지 않을경우 서비스 담당자에게 확인하여 진행한다.

[sample] SROC:[파킹페이지 전환] 진행합니다.
|단계|조치|
|---|---|
|파킹페이지 전환| 웹정상 접속되지 않을경우 파킹페이지로 전환한다. <br> 파킹 시트 (1)-(2) 수행|
|장애 dump 확보|동보 발생 노드의 로그 dump를 백업한다.|
|상태확인 및 서비스복구|전체 AP노드 상태확인(3)-(4)-(3) 수행 <br> P-DEP에서 reboot 상태 확인 <WEB Health Check> Product NameP: MLM Jira ap|
|DB 세션확인|DB 서버에 접속하여 InnoDB Cluster 상태 확인/복구 (1),(3) 수행. 세션이 줄지않고 누적되는 경우 Primary node reboot 수행(6)|
|서비스 정상화|P-DEP SW 서비스(Jira Conflu.) > 5-5 메모리 MLM > Monitoring Setting 의 Health Check를 통해 서비스 정상화를 확인한다. <WEB Health Check> Product Name: MLM Jira<br><TCP Health Check> Product Name: MLM Jira ap, MLM Jira proxy|
|파킹 해제|파킹 전환한 경우만 (3) 수행 <br> 웹 접속 및 로그인 정상화 확인|

4. 후속 조치
--
4-1. 모니터링
20분간 동보 및 웹 상태 모니터링을 지속한다.
모니터링 중 동보 재발시 시스템 담당자 대응을 원칙으로 한다. 담당자 대응 불가한 상황엔 3-2. 장애조치를 다시 진행한다.

---
- Knox Teams DevOps Bot을 활용한 서버 원격 재시작 기능
  . 전 인스턴스에 Ansible을 통한 서버 원격 재시작 설정 완료
  . Knox 메신저 내 DevOps 봇으로 실행
    서버 원격 재기동 방법
    1. DevOps 봇의 홈 호출시 Incident action을 혹은 장애 발생시 동보 메시지에서 장애 Action을 선택한다.
    2. Indent Action을 수행할 Product를 선택한다.
    3. 실행할 Incident Action의 Pipeline을 선택한뒤 리소스(host 정보)를 한번 더 확인하고 실행자 Knox ID를 입력후 '실행'을 선택한다.
    4. 수행 결과를 확인한다.

이상로그 분석활동(정기적으로 수행)
- 로그 수진 ELK 환경 구성

적용 효과
- 이상 로그 분석 활동을 통한 서비스 안정화
  . DS Confluence 모바일 서비스의 error.log 분석을 통해 항목별 개선 활동 진행
  |발견한 에러타입|8월|0월|10월|
  |---|---|---|---|
  |릴레이서버->Confluence로 요청을 보내고 받을때 timeout 발생|96건|53건|35건|
  |응답정보 생성실패(image 축소, zip, response parsing 오류)|212건|74건|24건|
- 모니터링 및 조치 업무의 효율화(운영담당자의 주말/야간 긴급출동 사례 감소)
  . 장애 긴급대응 체계를 적용하여 운영자가 근무하지 않는 야간/휴일에도 빠른 대응 가능
  . Knox Teams DevOps Bot을 활용하여 5초이내로 서비스 재시작 명령을 수행할 수 있음.
- 24시간 장애 모니터링 체계 구축후 최근 조치 사례 (장애로 이어지기 전 사전 조치 완료)
  . 추석 연휴 종료후 업무 재개를 앞두고 MLM Jira의 AP 서버 노드중 1개 노드에서 Web Health Check 실패 감지
  . 일시: 2025.10.13 월 00:36
  . 원인: 사용자의 API 호출 이상 급증
  . 조치: 24시간 장애대응이 가능한 인스턴스로 SROC에서 이상징후를 감지한 후 SDS 담당자 홍길동 프로에게 유선 연라 및 SOP 수행
  . 영향 및 결과: 새벽 시간이었음에도 신속한 감지 및 조치 가능하여 무장애 서비스 유지











